<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Platto Partner | Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="owner-style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>

    <div id="loader" class="loader-overlay"><div class="spinner"></div></div>

    <!-- Sidebar Navigation -->
    <div id="main-wrapper" style="display:none;" class="dashboard-container">
        <aside class="sidebar">
            <div class="side-logo">PLATTO<span>Partner</span></div>
            <nav class="side-nav">
                <button class="nav-link active" onclick="showSection('status')">üè† Membership Status</button>
                <button class="nav-link" onclick="showSection('profile')">üè¢ Restaurant Info</button>
                <button class="nav-link" onclick="showSection('menu')">üç¥ Menu Manager</button>
                <button class="nav-link" onclick="showSection('payment')">üí≥ Payment & Offers</button>
                <button class="nav-link" onclick="showSection('qr')">üñºÔ∏è QR Generator</button>
                <button class="nav-link logout" onclick="logout()">üö™ Logout</button>
            </nav>
        </aside>

        <main class="content">
            <!-- 7 & 8: Membership & Notifications -->
            <section id="status-sec" class="page-sec">
                <div class="welcome-header">
                    <h1>Welcome, <span id="top-res-name">Partner</span></h1>
                    <div id="notif-box" class="notif-alert"></div>
                </div>
                <div class="status-grid">
                    <div class="stat-card">
                        <small>Account Status</small>
                        <h2 id="disp-status">Active</h2>
                    </div>
                    <div class="stat-card">
                        <small>Current Plan</small>
                        <h2 id="disp-plan">Monthly</h2>
                    </div>
                    <div class="stat-card">
                        <small>Valid Till</small>
                        <h2 id="disp-expiry">-- -- ----</h2>
                    </div>
                </div>
            </section>

            <!-- 1 & 5: Restaurant Info & Call Button -->
            <section id="profile-sec" class="page-sec" style="display:none;">
                <div class="card">
                    <h3>Restaurant Profile</h3>
                    <div class="form-grid">
                        <div class="input-group">
                            <label>Restaurant Logo</label>
                            <input type="file" id="res-logo-file" accept="image/*">
                        </div>
                        <div class="input-group">
                            <label>Restaurant Name</label>
                            <input type="text" id="res-name" placeholder="e.g. Pizza Club">
                        </div>
                        <div class="input-group">
                            <label>Address</label>
                            <input type="text" id="res-address" placeholder="Full Address">
                        </div>
                        <div class="input-group">
                            <label>Primary Phone (for Call Button)</label>
                            <input type="tel" id="res-phone" placeholder="9876543210">
                        </div>
                        <div class="input-group full-width">
                            <label>About Description</label>
                            <textarea id="res-about" rows="3" placeholder="Short description about your restaurant"></textarea>
                        </div>
                    </div>
                    <button class="save-btn" onclick="saveProfile()">Update Info</button>
                </div>
            </section>

            <!-- 2: Menu Manager -->
            <section id="menu-sec" class="page-sec" style="display:none;">
                <div class="card">
                    <h3>Add New Menu Item</h3>
                    <div class="form-grid">
                        <input type="text" id="item-name" placeholder="Item Name">
                        <input type="number" id="item-price" placeholder="Price (‚Çπ)">
                        <input type="file" id="item-img" accept="image/*">
                        <button class="save-btn" onclick="addMenuItem()">Add Item</button>
                    </div>
                </div>
                <div id="owner-menu-list" class="menu-display-grid">
                    <!-- Menu items will show here -->
                </div>
            </section>

            <!-- 3 & 4: Payment QR & Offers -->
            <section id="payment-sec" class="page-sec" style="display:none;">
                <div class="card">
                    <h3>Payment & UPI Settings</h3>
                    <div class="input-group">
                        <label>Your UPI ID (GPay/PhonePe)</label>
                        <input type="text" id="res-upi" placeholder="example@okaxis">
                    </div>
                    <div class="input-group">
                        <label>Custom Payment QR (Optional Upload)</label>
                        <input type="file" id="res-qr-file">
                    </div>
                    <button class="save-btn" onclick="savePaymentInfo()">Save Payment Details</button>
                </div>

                <div class="card" style="margin-top:20px;">
                    <h3>Offers & Discounts</h3>
                    <div class="input-group">
                        <label>Offer Text</label>
                        <input type="text" id="offer-text" placeholder="e.g. 20% OFF on all Pizzas">
                    </div>
                    <div class="toggle-group">
                        <label>Show Offer to Customers?</label>
                        <input type="checkbox" id="offer-status">
                    </div>
                    <button class="save-btn" onclick="saveOffer()">Update Offer</button>
                </div>
            </section>

            <!-- 6: QR Generator -->
            <section id="qr-sec" class="page-sec" style="display:none;">
                <div class="card qr-center">
                    <h3>Your Digital Menu QR</h3>
                    <p>Print this and place it on your tables.</p>
                    <div id="qrcode-box"></div>
                    <button class="save-btn" onclick="downloadQR()">Download QR Code</button>
                </div>
            </section>
        </main>
    </div>

    <!-- Initial Auth & Waiting Section (Pehle wala logic) -->
    <div id="auth-area"> <!-- Same as before --> </div>

    <script type="module" src="owner-script.js"></script>
</body>
</html>